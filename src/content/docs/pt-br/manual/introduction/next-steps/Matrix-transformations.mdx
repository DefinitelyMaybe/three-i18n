---
title: Transformações de matriz
sidebar:
  order: 4
---

Three.js usa `matrizes` para codificar transformações 3D --- translações (posição), rotações e dimensionamento.
Cada instância de [Object3D](api/core/Object3D) tem uma [matriz](api/core/Object3D#matrix) (matrix) que armazena a
posição, rotação e escala. Esta página descreve como atualizar a transformação de um objeto.

## Propriedades de conveniência e `matrixAutoUpdate`

Existem duas maneiras de atualizar a transformação de um objeto:

<ol>
<li>
Modifique as propriedades `position`, `quaternion` e `scale` do objeto e deixe o three.js recalcular
a matriz do objeto a partir destas propriedades:

```javascript
object.position.copy(start_position);
object.quaternion.copy(quaternion);
```

Por padrão, a propriedade `matrixAutoUpdate` é definida como verdadeira e a matriz será recalculada automaticamente.
Se o objeto é estático, ou você deseja controlar manualmente quando ocorre o recálculo, um melhor desempenho pode ser obtido configurando a propriedade false:

```javascript
object.matrixAutoUpdate = false;
```

E depois de alterar qualquer propriedade, atualize manualmente a matriz:

```javascript
object.updateMatrix();
```

</li>
<li>
Modifique a matriz do objeto diretamente. A classe [Matrix4](api/math/Matrix4) tem vários métodos para modificar a matriz:

```javascript
object.matrix.setRotationFromQuaternion(quaternion);
object.matrix.setPosition(start_position);
object.matrixAutoUpdate = false;
```

Observe que `matrixAutoUpdate` _deve_ ser definido como `false` neste caso, e você deve ter certeza de _não_ chamar `updateMatrix`. Chamar `updateMatrix` irá destruir as alterações manuais feitas na matriz, recalculando a matriz de `position`, `scale` e assim por diante.

</li>
</ol>

## Objeto e matrizes mundo (world matrices)

A [matriz](api/core/Object3D#matrix) (matrix) de um objeto armazena a transformação do objeto _relativa_ ao objeto [pai](api/core/Object3D#parent) (parent); para obter a transformação do objeto em coordenadas _mundo_, deve-se acessar a [Object3D](api/core/Object3D#matrixWorld) do objeto.

Quando a transformação do objeto pai ou filho muda, você pode solicitar que a [matrixWorld](api/core/Object3D#matrixWorld) do objeto filho seja atualizada chamando [updateMatrixWorld](api/core/Object3D#updateMatrixWorld)().

## Rotação e Quaternion

Three.js fornece duas maneiras de representar rotações 3D: [Euler angles](api/math/Euler) e [Quaternions](api/math/Quaternion), bem como métodos para converter entre os dois.
Os ângulos de Euler estão sujeitos a um problema chamado "gimbal lock", onde certas configurações podem perder um grau de liberdade (impedindo que o objeto seja girado em torno de um eixo). Por esta razão,
as rotações do objeto são _sempre_ armazenadas no objeto [quaternion](api/core/Object3D#quaternion).

As versões anteriores da biblioteca incluíam uma propriedade `useQuaternion` que, quando definida como false, faria com que a [matrix](api/core/Object3D#matrix) do objeto fosse calculada a partir de um ângulo de Euler. Essa prática está obsoleta --- em vez disso, você deve usar o método [setRotationFromEuler](api/core/Object3D#setRotationFromEuler), que atualizará o quaternion.
