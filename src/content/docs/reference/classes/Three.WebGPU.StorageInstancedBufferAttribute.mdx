---
editUrl: false
next: false
prev: false
title: "StorageInstancedBufferAttribute"
---

Defined in: three/src/renderers/common/StorageInstancedBufferAttribute.js:17

This special type of instanced buffer attribute is intended for compute shaders.
In earlier three.js versions it was only possible to update attribute data
on the CPU via JavaScript and then upload the data to the GPU. With the
new material system and renderer it is now possible to use compute shaders
to compute the data for an attribute more efficiently on the GPU.

The idea is to create an instance of this class and provide it as an input
to [StorageBufferNode](Three.WebGPU.StorageBufferNode.html).

Note: This type of buffer attribute can only be used with `WebGPURenderer`.

## Extends

- [`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html)

## Constructors

### Constructor

> **new StorageInstancedBufferAttribute**(`count`, `itemSize`, `typeClass`?): `StorageInstancedBufferAttribute`

Defined in: three/src/renderers/common/StorageInstancedBufferAttribute.js:27

Constructs a new storage instanced buffer attribute.

#### Parameters

##### count

`any`

The item count. It is also valid to pass a typed array as an argument.
The subsequent parameters are then obsolete.

##### itemSize

`number`

The item size.

##### typeClass?

`constructor` = `Float32Array`

A typed array constructor.

#### Returns

`StorageInstancedBufferAttribute`

#### Overrides

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`constructor`](Three.InstancedBufferAttribute.html#constructor)

## Properties

### array

> **array**: `TypedArray`

Defined in: three/src/core/BufferAttribute.js:68

The array holding the attribute data. It should have `itemSize * numVertices`
elements, where `numVertices` is the number of vertices in the associated geometry.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`array`](Three.InstancedBufferAttribute.html#array)

***

### count

> `readonly` **count**: `number`

Defined in: three/src/core/BufferAttribute.js:86

Represents the number of items this buffer attribute stores. It is internally computed
by dividing the `array` length by the `itemSize`.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`count`](Three.InstancedBufferAttribute.html#count)

***

### gpuType

> **gpuType**: `any`

Defined in: three/src/core/BufferAttribute.js:127

Configures the bound GPU type for use in shaders.

Note: this only has an effect for integer arrays and is not configurable for float arrays.
For lower precision float types, use `Float16BufferAttribute`.

#### Default

```ts
FloatType
```

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`gpuType`](Three.InstancedBufferAttribute.html#gputype)

***

### isBufferAttribute

> `readonly` **isBufferAttribute**: `boolean`

Defined in: three/src/core/BufferAttribute.js:44

This flag can be used for type testing.

#### Default

```ts
true
```

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`isBufferAttribute`](Three.InstancedBufferAttribute.html#isbufferattribute)

***

### isInstancedBufferAttribute

> `readonly` **isInstancedBufferAttribute**: `boolean`

Defined in: three/src/core/InstancedBufferAttribute.js:29

This flag can be used for type testing.

#### Default

```ts
true
```

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`isInstancedBufferAttribute`](Three.InstancedBufferAttribute.html#isinstancedbufferattribute)

***

### isStorageInstancedBufferAttribute

> `readonly` **isStorageInstancedBufferAttribute**: `boolean`

Defined in: three/src/renderers/common/StorageInstancedBufferAttribute.js:40

This flag can be used for type testing.

#### Default

```ts
true
```

***

### itemSize

> **itemSize**: `number`

Defined in: three/src/core/BufferAttribute.js:77

The number of values of the array that should be associated with a particular vertex.
For instance, if this attribute is storing a 3-component vector (such as a position,
normal, or color), then the value should be `3`.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`itemSize`](Three.InstancedBufferAttribute.html#itemsize)

***

### meshPerAttribute

> **meshPerAttribute**: `number`

Defined in: three/src/core/InstancedBufferAttribute.js:40

Defines how often a value of this buffer attribute should be repeated. A
value of one means that each value of the instanced attribute is used for
a single instance. A value of two means that each value is used for two
consecutive instances (and so on).

#### Default

```ts
1
```

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`meshPerAttribute`](Three.InstancedBufferAttribute.html#meshperattribute)

***

### name

> **name**: `string`

Defined in: three/src/core/BufferAttribute.js:60

The name of the buffer attribute.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`name`](Three.InstancedBufferAttribute.html#name)

***

### normalized

> **normalized**: `boolean`

Defined in: three/src/core/BufferAttribute.js:97

Applies to integer data only. Indicates how the underlying data in the buffer maps to
the values in the GLSL code. For instance, if `array` is an instance of `UInt16Array`,
and `normalized` is `true`, the values `0 -+65535` in the array data will be mapped to
`0.0f - +1.0f` in the GLSL attribute. If `normalized` is `false`, the values will be converted
to floats unmodified, i.e. `65535` becomes `65535.0f`.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`normalized`](Three.InstancedBufferAttribute.html#normalized)

***

### updateRanges

> **updateRanges**: `any`[]

Defined in: three/src/core/BufferAttribute.js:116

This can be used to only update some components of stored vectors (for example, just the
component related to color). Use the `addUpdateRange()` function to add ranges to this array.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`updateRanges`](Three.InstancedBufferAttribute.html#updateranges)

***

### usage

> **usage**: `any`

Defined in: three/src/core/BufferAttribute.js:108

Defines the intended usage pattern of the data store for optimization purposes.

Note: After the initial use of a buffer, its usage cannot be changed. Instead,
instantiate a new one and set the desired usage before the next render.

#### Default

```ts
StaticDrawUsage
```

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`usage`](Three.InstancedBufferAttribute.html#usage)

***

### version

> **version**: `number`

Defined in: three/src/core/BufferAttribute.js:134

A version number, incremented every time the `needsUpdate` is set to `true`.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`version`](Three.InstancedBufferAttribute.html#version)

## Accessors

### needsUpdate

#### Set Signature

> **set** **needsUpdate**(`value`): `void`

Defined in: three/src/core/BufferAttribute.js:152

Flag to indicate that this attribute has changed and should be re-sent to
the GPU. Set this to `true` when you modify the value of the array.

##### Default

```ts
false
```

##### Parameters

###### value

`boolean`

##### Returns

`void`

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`needsUpdate`](Three.InstancedBufferAttribute.html#needsupdate)

## Methods

### addUpdateRange()

> **addUpdateRange**(`start`, `count`): `void`

Defined in: three/src/core/BufferAttribute.js:178

Adds a range of data in the data array to be updated on the GPU.

#### Parameters

##### start

`number`

Position at which to start update.

##### count

`number`

The number of components to update.

#### Returns

`void`

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`addUpdateRange`](Three.InstancedBufferAttribute.html#addupdaterange)

***

### applyMatrix3()

> **applyMatrix3**(`m`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:260

Applies the given 3x3 matrix to the given attribute. Works with
item size `2` and `3`.

#### Parameters

##### m

`Matrix3`

The matrix to apply.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`applyMatrix3`](Three.InstancedBufferAttribute.html#applymatrix3)

***

### applyMatrix4()

> **applyMatrix4**(`m`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:297

Applies the given 4x4 matrix to the given attribute. Only works with
item size `3`.

#### Parameters

##### m

`Matrix4`

The matrix to apply.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`applyMatrix4`](Three.InstancedBufferAttribute.html#applymatrix4)

***

### applyNormalMatrix()

> **applyNormalMatrix**(`m`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:320

Applies the given 3x3 normal matrix to the given attribute. Only works with
item size `3`.

#### Parameters

##### m

`Matrix3`

The normal matrix to apply.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`applyNormalMatrix`](Three.InstancedBufferAttribute.html#applynormalmatrix)

***

### clearUpdateRanges()

> **clearUpdateRanges**(): `void`

Defined in: three/src/core/BufferAttribute.js:187

Clears the update ranges.

#### Returns

`void`

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`clearUpdateRanges`](Three.InstancedBufferAttribute.html#clearupdateranges)

***

### clone()

> **clone**(): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:650

Returns a new buffer attribute with copied values from this instance.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A clone of this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`clone`](Three.InstancedBufferAttribute.html#clone)

***

### copy()

> **copy**(`source`): `StorageInstancedBufferAttribute`

Defined in: three/src/core/InstancedBufferAttribute.js:44

Copies the values of the given buffer attribute to this instance.

#### Parameters

##### source

`any`

The buffer attribute to copy.

#### Returns

`StorageInstancedBufferAttribute`

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`copy`](Three.InstancedBufferAttribute.html#copy)

***

### copyArray()

> **copyArray**(`array`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:245

Copies the given array data into this buffer attribute.

#### Parameters

##### array

`any`

The array to copy.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`copyArray`](Three.InstancedBufferAttribute.html#copyarray)

***

### copyAt()

> **copyAt**(`index1`, `attribute`, `index2`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:224

Copies a vector from the given buffer attribute to this one. The start
and destination position in the attribute buffers are represented by the
given indices.

#### Parameters

##### index1

`number`

The destination index into this buffer attribute.

##### attribute

[`BufferAttribute`](Three.BufferAttribute.html)

The buffer attribute to copy from.

##### index2

`number`

The source index into the given buffer attribute.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`copyAt`](Three.InstancedBufferAttribute.html#copyat)

***

### getComponent()

> **getComponent**(`index`, `component`): `number`

Defined in: three/src/core/BufferAttribute.js:382

Returns the given component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### component

`number`

The component index.

#### Returns

`number`

The returned value.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`getComponent`](Three.InstancedBufferAttribute.html#getcomponent)

***

### getW()

> **getW**(`index`): `number`

Defined in: three/src/core/BufferAttribute.js:515

Returns the w component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

#### Returns

`number`

The w component.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`getW`](Three.InstancedBufferAttribute.html#getw)

***

### getX()

> **getX**(`index`): `number`

Defined in: three/src/core/BufferAttribute.js:416

Returns the x component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

#### Returns

`number`

The x component.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`getX`](Three.InstancedBufferAttribute.html#getx)

***

### getY()

> **getY**(`index`): `number`

Defined in: three/src/core/BufferAttribute.js:449

Returns the y component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

#### Returns

`number`

The y component.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`getY`](Three.InstancedBufferAttribute.html#gety)

***

### getZ()

> **getZ**(`index`): `number`

Defined in: three/src/core/BufferAttribute.js:482

Returns the z component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

#### Returns

`number`

The z component.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`getZ`](Three.InstancedBufferAttribute.html#getz)

***

### onUpload()

> **onUpload**(`callback`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:637

Sets the given callback function that is executed after the Renderer has transferred
the attribute array data to the GPU. Can be used to perform clean-up operations after
the upload when attribute data are not needed anymore on the CPU side.

#### Parameters

##### callback

`Function`

The `onUpload()` callback.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`onUpload`](Three.InstancedBufferAttribute.html#onupload)

***

### onUploadCallback()

> **onUploadCallback**(): `void`

Defined in: three/src/core/BufferAttribute.js:142

A callback function that is executed after the renderer has transferred the attribute
array data to the GPU.

#### Returns

`void`

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`onUploadCallback`](Three.InstancedBufferAttribute.html#onuploadcallback)

***

### set()

> **set**(`value`, `offset`?): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:366

Sets the given array data in the buffer attribute.

#### Parameters

##### value

`any`

The array data to set.

##### offset?

`number` = `0`

The offset in this buffer attribute's array.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`set`](Three.InstancedBufferAttribute.html#set)

***

### setComponent()

> **setComponent**(`index`, `component`, `value`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:400

Sets the given value to the given component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### component

`number`

The component index.

##### value

`number`

The value to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setComponent`](Three.InstancedBufferAttribute.html#setcomponent)

***

### setUsage()

> **setUsage**(`value`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:164

Sets the usage of this buffer attribute.

#### Parameters

##### value

`any`

The usage to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this buffer attribute.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setUsage`](Three.InstancedBufferAttribute.html#setusage)

***

### setW()

> **setW**(`index`, `w`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:532

Sets the w component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### w

`number`

The value to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setW`](Three.InstancedBufferAttribute.html#setw)

***

### setX()

> **setX**(`index`, `x`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:433

Sets the x component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### x

`number`

The value to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setX`](Three.InstancedBufferAttribute.html#setx)

***

### setXY()

> **setXY**(`index`, `x`, `y`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:550

Sets the x and y component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### x

`number`

The value for the x component to set.

##### y

`number`

The value for the y component to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setXY`](Three.InstancedBufferAttribute.html#setxy)

***

### setXYZ()

> **setXYZ**(`index`, `x`, `y`, `z`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:577

Sets the x, y and z component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### x

`number`

The value for the x component to set.

##### y

`number`

The value for the y component to set.

##### z

`number`

The value for the z component to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setXYZ`](Three.InstancedBufferAttribute.html#setxyz)

***

### setXYZW()

> **setXYZW**(`index`, `x`, `y`, `z`, `w`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:607

Sets the x, y, z and w component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### x

`number`

The value for the x component to set.

##### y

`number`

The value for the y component to set.

##### z

`number`

The value for the z component to set.

##### w

`number`

The value for the w component to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setXYZW`](Three.InstancedBufferAttribute.html#setxyzw)

***

### setY()

> **setY**(`index`, `y`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:466

Sets the y component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### y

`number`

The value to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setY`](Three.InstancedBufferAttribute.html#sety)

***

### setZ()

> **setZ**(`index`, `z`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:499

Sets the z component of the vector at the given index.

#### Parameters

##### index

`number`

The index into the buffer attribute.

##### z

`number`

The value to set.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`setZ`](Three.InstancedBufferAttribute.html#setz)

***

### toJSON()

> **toJSON**(): `any`

Defined in: three/src/core/InstancedBufferAttribute.js:54

Serializes the buffer attribute into JSON.

#### Returns

`any`

A JSON object representing the serialized buffer attribute.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`toJSON`](Three.InstancedBufferAttribute.html#tojson)

***

### transformDirection()

> **transformDirection**(`m`): [`BufferAttribute`](Three.BufferAttribute.html)

Defined in: three/src/core/BufferAttribute.js:343

Applies the given 4x4 matrix to the given attribute. Only works with
item size `3` and with direction vectors.

#### Parameters

##### m

`Matrix4`

The matrix to apply.

#### Returns

[`BufferAttribute`](Three.BufferAttribute.html)

A reference to this instance.

#### Inherited from

[`InstancedBufferAttribute`](Three.InstancedBufferAttribute.html).[`transformDirection`](Three.InstancedBufferAttribute.html#transformdirection)
