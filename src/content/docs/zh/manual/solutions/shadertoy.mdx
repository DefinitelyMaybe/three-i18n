---
title: ä½¿ç”¨Shadertoyä¸­çš„ç€è‰²å™¨
sidebar:
  order: 7
---

[Shadertoy](https://shadertoy.com) æ˜¯ä¸€ä¸ªæœ‰ç€ä¼—å¤šæƒŠè‰³çš„shaderå®è·µçš„è‘—åç½‘ç«™ã€‚ ç»å¸¸æœ‰äººé—®å¦‚ä½•åœ¨ Three.js é‡Œé¢ä½¿ç”¨é‚£äº›shaderã€‚

é‡è¦çš„æ˜¯è¦çŸ¥é“ï¼Œè¢«ç§°ä½œShader<strong>TOY</strong> äº‹å‡ºæœ‰å› ã€‚ é€šå¸¸ä¸å…¶æŠŠ ShaderToy é‡Œçš„shaderå½“åšæœ€ä½³å®è·µï¼Œä¸å¦‚ç§°å®ƒä»¬æ˜¯æœ‰è¶£çš„æŒ‘æˆ˜ï¼Œæ¯”å¦‚ï¼š[dwitter](https://dwitter.net) (ä»£ç å°‘äº140 ä¸ªå­—ç¬¦) æˆ–[js13kGames](https://js13kgames.com)
(ç”¨ä¸å¤šäº13kä»£ç åˆ¶ä½œæ¸¸æˆ)ã€‚

ä½¿ç”¨Shadertoy çš„éš¾é¢˜æ˜¯, _ç»™ç‰¹å®šä½ç½®çš„åƒç´ ç€è‰²å†™å‡½æ•°ä»è€Œç»˜åˆ¶æœ‰è¶£çš„å›¾åƒ_ã€‚è¿™æ˜¯ä¸€ç§æœ‰è¶£çš„æŒ‘æˆ˜ï¼Œå¾ˆå¤šçš„ç»“æœéå¸¸æƒŠè‰³ã€‚ä½†è¯·æ³¨æ„ï¼Œè¿™å¹¶éæœ€ä½³å®è·µã€‚

ç‚¹å‡» [è¿™ä¸ªæƒŠè‰³çš„shaderç»˜åˆ¶äº†æ•´ä¸ªåŸå¸‚](https://www.shadertoy.com/view/XtsSWs)

<div class="threejs_center">
  ![image](/resources/images/shadertoy-skyline.png)
</div>

åœ¨æˆ‘çš„GPU ä¸Šå…¨å±è¿è¡Œï¼Œå®ƒçš„è¿è¡Œé€Ÿåº¦ä¸ºæ¯ç§’å¤§çº¦5å¸§ã€‚ä¸[ã€ŠåŸå¸‚ï¼šå¤©é™…çº¿ã€‹](https://store.steampowered.com/app/255710/Cities_Skylines/)è¿™æ ·çš„æ¸¸æˆå½¢æˆé²œæ˜å¯¹æ¯”ã€‚

<div class="threejs_center">
  ![image](/resources/images/cities-skylines.jpg)
</div>

è¿™ä¸ªæ¸¸æˆåœ¨åŒä¸€å°æœºå™¨ä¸Šæ¯ç§’è¿è¡Œ 30-60 å¸§ï¼Œå› ä¸ºå®ƒä½¿ç”¨æ›´å¤š ä¼ ç»ŸæŠ€æœ¯ï¼Œå»ºç­‘ç‰©ç”±ä¸‰è§’å½¢ç»˜åˆ¶è€Œæˆï¼Œå¹¶å¸¦æœ‰çº¹ç†ï¼Œç­‰ç­‰...

è¨€å½’æ­£ä¼ ï¼Œè®©æˆ‘ä»¬å›åˆ°å¦‚ä½•åœ¨three.jsä½¿ç”¨ Shadertoyçš„shader ã€‚

å½“ä½ åœ¨ [shadertoy.com](https://www.shadertoy.com/new)ä¸Šç‚¹å‡»â€œæ–°å»ºâ€,è¿™æ˜¯ä¸ªåˆå§‹çš„shaderï¼Œè‡³å°‘ 2019 å¹´ 1 æœˆæ˜¯è¿™æ ·çš„ã€‚

```glsl
// By iq: https://www.shadertoy.com/user/iq
// license: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
// Normalized pixel coordinates (from 0 to 1)
vec2 uv = fragCoord/iResolution.xy;

// Time varying pixel color
vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));

// Output to screen
fragColor = vec4(col,1.0);
}
```

å…³äºshaderä½ é¦–è¦çŸ¥é“çš„é‡ç‚¹æ˜¯ï¼Œä»–ä»¬æ˜¯ç”¨ä¸€ç§å«åšGLSL (Graphics Library Shading Language)çš„è¯­è¨€å†™æˆçš„ï¼Œè¿™æ˜¯ä¸€ç§ä¸“ä¸º3D æ•°å­¦è®¾è®¡çš„å¼ºç±»å‹è¯­è¨€ã€‚åœ¨ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°`vec4`, `vec2`,`vec3` è¿™ä¸‰ç§ç‰¹å®šç±»å‹ã€‚ ä¸€ä¸ª `vec2` æœ‰2ä¸ªvalue, ä¸€ä¸ª `vec3`
æœ‰3ä¸ªvalue,ä¸€ä¸ª`vec4` æœ‰4ä¸ª valuesã€‚ä»–ä»¬çš„ä½¿ç”¨æ–¹æ³•éå¸¸çµæ´»ã€‚æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ä½¿ç”¨ `x`, `y`, `z`, ä»¥åŠ`w` ä¾‹å¦‚ï¼š

```glsl
vec4 v1 = vec4(1.0, 2.0, 3.0, 4.0);
float v2 = v1.x + v1.y;  // adds 1.0 + 2.0
```

ä¸JavaScriptä¸åŒï¼ŒGLSLæ›´åƒæ˜¯C / C++ï¼Œå…¶ä¸­å˜é‡å¿…é¡»å®šä¹‰ç±»å‹ï¼Œæ‰€ä»¥ä¸èƒ½å†™æˆè¿™æ ·`var v = 1.2;`
è€Œæ˜¯é€šè¿‡ `float v = 1.2;` å°† `v` å£°æ˜ä¸ºæµ®ç‚¹æ•°ã€‚

è¯¦è§£ GLSLè¶…å‡ºæœ¬æ–‡èŒƒç•´ã€‚ æ¦‚è§ˆGLSLå¯ä»¥ç‚¹å‡»[æœ¬æ–‡](https://webglfundamentals.org/webgl/lessons/webgl-shaders-and-glsl.html)
ï¼Œè¿›é˜¶å¯ä»¥æŸ¥çœ‹ [æœ¬ç³»åˆ—](https://thebookofshaders.com/)ã€‚

æ³¨æ„ï¼Œåœ¨2019 å¹´ 1 æœˆ,
[shadertoy.com](https://shadertoy.com) ä»…å…³æ³¨ _fragment
shaders_. Fragment shaderçš„èŒè´£åœ¨äºï¼Œç»™å®šä¸€ä¸ªåƒç´ çš„ä½ç½®ï¼Œè¾“å‡ºè¯¥åƒç´ é¢œè‰²ã€‚

ä¸Šé¢çš„ä»£ç æˆ‘ä»¬çœ‹åˆ° shader æœ‰ä¸€ä¸ª`out` ä¿®é¥°çš„å«`fragColor`çš„å‚æ•°ã€‚`out` ä»£è¡¨ `output`ã€‚è¿™ä¸ªå‚æ•°å‘å‡½æ•°ä¼ é€’å‚æ•°ã€‚æˆ‘ä»¬éœ€è¦å°†å…¶è®¾ç½®ä¸ºæŸç§é¢œè‰²ã€‚

å®ƒä¹Ÿæœ‰ä¸€ä¸ª å« `fragCoord`çš„`in` (ä»£è¡¨ input)å‚æ•°ã€‚ è¿™ä»£è¡¨äº†å°†è¦ç»˜åˆ¶çš„åƒç´ åæ ‡ã€‚åŸºäºåæ ‡æˆ‘ä»¬å¯ä»¥ç”Ÿæˆç‰¹å®šé¢œè‰²ã€‚ å¦‚æœcanvasæœ‰ 400x300 åƒç´ ï¼Œé‚£ä¹ˆå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ 400x300
æ¬¡æˆ–è€…è¯´æ˜¯ 120,000 æ¬¡ã€‚ æ¯æ¬¡ `fragCoord` éƒ½æ˜¯ä¸€ä¸ªä¸åŒçš„åƒç´ åæ ‡ã€‚

è¿˜æœ‰ 2 ä¸ªæ­£åœ¨ä½¿ç”¨ä½†æœªåœ¨ä»£ç ä¸­å®šä¹‰çš„å˜é‡ï¼Œ ä¸€æ˜¯
`iResolution`ã€‚ è¯¥å‚æ•°è®¾ç½® canvasåˆ†è¾¨ç‡ ã€‚è‹¥è¯¥å‚æ•°è®¾ç½®ä¸º
400x300 åˆ™ `iResolution` æ˜¯ 400,300 ã€‚éšç€åƒç´ å€¼
åœ¨400,300å˜åŒ– `uv` å°†åœ¨textureçš„çºµæ¨ªä¸¤ä¸ªæ–¹å‘ä» 0.0 to 1.0 å˜åŒ–ã€‚ ä½¿ç”¨
_è§„èŒƒåŒ–_ å€¼èƒ½ç®€åŒ–å·¥ä½œï¼Œè€Œä¸” shadertoyä¸Šå¤§éƒ¨åˆ†çš„
shadersä¹Ÿä»¥ç±»ä¼¼æ–¹å¼å¼€å§‹ã€‚

shaderä¸­å¦ä¸€ä¸ªæœªå®šä¹‰çš„å‚æ•°æ˜¯ `iTime`ã€‚ è¯¥å‚æ•°ä»£è¡¨é¡µé¢åŠ è½½åçš„ç§’æ•°ã€‚

ä¸Šé¢è¿™ä¿©å…¨å±€å˜é‡åœ¨shaderæœ¯è¯­ä¸­è¢«ç§°ä¸º _uniform_ å˜é‡ã€‚ ä¹‹æ‰€ä»¥è¢«ç§°ä¸º _uniform_
åœ¨äºè¿™äº›å˜é‡åœ¨shaderçš„ä¸€æ¬¡è°ƒç”¨ä¸­ä¿æŒuniformï¼ˆç»Ÿä¸€ï¼‰ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡shaderè°ƒç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯åœ¨shadertoyå®šä¹‰çš„ç‰¹å®šå˜é‡ï¼Œ è€ŒéGLSL*å®˜æ–¹*
å˜é‡ã€‚è¿™ä¿©å˜é‡æ˜¯å‘æ˜shadertoyçš„äººå®šä¹‰çš„ã€‚

è¿™ç¯‡ [Shadertoy æ–‡æ¡£](https://www.shadertoy.com/howto)ä¸­æœ‰æ›´å¤šå®šä¹‰ã€‚ ç°åœ¨è®©æˆ‘ä»¬ä¸€èµ·æ¥å†™ç‚¹ä»£ç æ¥æ“ä½œä¸Šé¢ä¿©shaderå‚æ•°ã€‚

é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå¡«å……canvasçš„planeã€‚
å‚è€ƒè¿™ç¯‡[å…³äºèƒŒæ™¯çš„æ–‡ç« ](backgrounds.html)ã€‚
æˆ‘ä»¬ä»¥è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œä¸è¿‡è¦å…ˆåˆ æ‰cubeã€‚ä»£ç å¾ˆç®€å•ï¼Œå¦‚ä¸‹ï¼š

```js
function main() {
  const canvas = document.querySelector("#c");
  const renderer = new THREE.WebGLRenderer({ antialias: true, canvas });
  renderer.autoClearColor = false;

  const camera = new THREE.OrthographicCamera(
    -1, // left
    1, // right
    1, // top
    -1, // bottom
    -1, // near,
    1, // far
  );
  const scene = new THREE.Scene();
  const plane = new THREE.PlaneGeometry(2, 2);
  const material = new THREE.MeshBasicMaterial({
    color: "red",
  });
  scene.add(new THREE.Mesh(plane, material));

  function resizeRendererToDisplaySize(renderer) {
    const canvas = renderer.domElement;
    const width = canvas.clientWidth;
    const height = canvas.clientHeight;
    const needResize = canvas.width !== width || canvas.height !== height;
    if (needResize) {
      renderer.setSize(width, height, false);
    }
    return needResize;
  }

  function render() {
    resizeRendererToDisplaySize(renderer);

    renderer.render(scene, camera);

    requestAnimationFrame(render);
  }

  requestAnimationFrame(render);
}

main();
```

æ­£å¦‚[å…³äºèƒŒæ™¯çš„æ–‡ç« ](backgrounds.html)æ‰€è§£é‡Šï¼Œè¿™äº›å‚æ•°å°†å®šä¹‰
[`OrthographicCamera`](/api/en/cameras/OrthographicCamera) ä»¥åŠä¸€ä¸ªå¤§å°æ˜¯2ä¸ªå•ä½ä¸”è¢«canvaså¡«å……çš„planeã€‚
å½“å‰æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªçº¢è‰²çš„canvasï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯çº¢è‰²
[`MeshBasicMaterial`](/api/en/materials/MeshBasicMaterial)æè´¨ã€‚

<iframe src="/editor?url=/manual/examples/shadertoy-prep.html"></iframe>

ç°åœ¨æˆ‘ä»¬æ·»åŠ shadertoy shaderã€‚

```js
const fragmentShader = `
#include <common>

uniform vec3 iResolution;
uniform float iTime;

// By iq: https://www.shadertoy.com/user/iq
// license: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
// Normalized pixel coordinates (from 0 to 1)
vec2 uv = fragCoord/iResolution.xy;

// Time varying pixel color
vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));

// Output to screen
fragColor = vec4(col,1.0);
}

void main() {
mainImage(gl_FragColor, gl_FragCoord.xy);
}
`;
```

ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†åˆšåˆšæåˆ°çš„2ä¸ªuniformå˜é‡ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å…³æ³¨ä»shadertoyé‡Œçš„shader GLSLä»£ç ã€‚æˆ‘ä»¬è°ƒç”¨
`mainImage` ï¼ŒåŒæ—¶ä¼ é€’
`gl_FragColor` å’Œ `gl_FragCoord.xy`ã€‚ `gl_FragColor`
æ˜¯ä¸€ä¸ªWebGLå®˜æ–¹
å…¨å±€å˜é‡ï¼Œä»£è¡¨å½“å‰åƒç´ çš„é¢œè‰²ã€‚`gl_FragCoord` æ˜¯å¦ä¸€ä¸ªWebGLå®˜æ–¹
å…¨å±€å˜é‡ï¼Œä»£è¡¨å½“å‰ç€è‰²åƒç´ çš„åæ ‡ã€‚

ç„¶åè®¾ç½®three.js uniformsï¼Œä»¥ä¾¿æ§åˆ¶shaderå‚æ•°ã€‚

```js
const uniforms = {
  iTime: { value: 0 },
  iResolution: { value: new THREE.Vector3() },
};
```

åœ¨THREE.jsçš„æ¯ä¸ªuniforméƒ½æœ‰ `value` å‚æ•°ã€‚è¯¥å‚æ•°å¿…é¡»ä¸shaderä¸­çš„uniformç±»å‹åŒ¹é…ã€‚

ç„¶åæˆ‘ä»¬æŠŠfragmentshaderå’Œuniformséƒ½ä¼ é€’ç»™
[`ShaderMaterial`](/api/en/materials/ShaderMaterial)ã€‚

```js
-const material = new THREE.MeshBasicMaterial({
-    color: 'red',
-});
+const material = new THREE.ShaderMaterial({
+  fragmentShader,
+  uniforms,
+});
```

åœ¨æ¸²æŸ“å‰ï¼Œéœ€è¦å…ˆè®¾ç½®uniformsçš„å€¼ã€‚

```js
-function render() {
+function render(time) {
+  time *= 0.001;  // convert to seconds

resizeRendererToDisplaySize(renderer);

+  const canvas = renderer.domElement;
+  uniforms.iResolution.value.set(canvas.width, canvas.height, 1);
+  uniforms.iTime.value = time;

renderer.render(scene, camera);

requestAnimationFrame(render);
}
```

<blockquote>

æ³¨æ„ï¼š
ä¸æ¸…æ¥šä¸ºä½•`iResolution`æ˜¯ä¸ª`vec3`,è€Œä¸”
[shadertoy.com](https://www.shadertoy.com/howto)ä¸Šçš„æ–‡æ¡£ä¹Ÿæ²¡æœ‰è¯´æ˜ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯å•¥ï¼Œåœ¨ä¸Šé¢æ²¡æœ‰ç”¨åˆ°ç¬¬ä¸‰ä¸ªå‚æ•°æ‰€ä»¥æš‚æ—¶è®¾ç½®ä¸º1ã€‚Â¯\_(ãƒ„)\_/Â¯

</blockquote>

<iframe src="/editor?url=/manual/examples/shadertoy-basic.html"></iframe>

ä¸Šé¢å®šä¹‰çš„æ–°shaderæ•ˆæœä¸æˆ‘ä»¬åœ¨ [Shadertoy](https://www.shadertoy.com/new)ä¸Šçœ‹åˆ°çš„åŒ¹é…ï¼Œ
è‡³å°‘ 2019 å¹´ 1 æœˆæ˜¯è¿™æ ·çš„ ğŸ˜‰ã€‚è¿™ä¸ªshaderåšäº†äº›å•¥ï¼Ÿ

<ul>
<li>`uv` ä»0å˜åˆ°1ã€‚</li>
<li>`cos(uv.xyx)`å¾—åˆ°3ä¸ªcoså€¼ï¼Œä»¥`vec3`å½¢å¼è¾“å‡ºï¼Œä¸€ä¸ªæ˜¯`uv.x`çš„coså€¼, ä¸€ä¸ªæ˜¯`uv.y`çš„coså€¼ï¼Œæœ€åæ˜¯`uv.x`çš„coså€¼ã€‚</li>
<li>å‚æ•°ä¸­åŠ ä¸Šæ—¶é—´ `cos(iTime+uv.xyx)`å½¢æˆåŠ¨ç”»ã€‚</li>
<li>å¦å¤–`vec3(0,2,4)`å‚æ•°ä¸`cos(iTime+uv.xyx+vec3(0,2,4))` æ±‚å’Œä½¿cosæ³¢åç§»ã€‚</li>
<li>`cos` è¾“å‡ºå€¼èŒƒå›´ä»-1åˆ°1ï¼Œæ‰€ä»¥ç»è¿‡`0.5 * 0.5 + cos(...)`ä»-1 < - > 1 å˜ä¸º 0.0 < - > 1.0</li>
<li>è®¡ç®—ç»“æœä½œä¸ºRGBé¢œè‰²èµ‹äºˆå½“å‰åƒç´ ã€‚</li>
</ul>

ä¸ºäº†æ›´å®¹æ˜“çœ‹å‡ºcosæ³¢å½¢æˆ‘ä»¬ç¨å¾®è°ƒæ•´ä¸€ä¸‹ä»£ç ã€‚å½“å‰`uv`
ä»…èƒ½ä»0åˆ°1ï¼Œå› cosæ³¢å½¢åœ¨2Ï€å¤„é‡å¤ï¼Œæˆ‘ä»¬é€šè¿‡å°†uvä¹˜ä¸Š40ï¼Œå®ç°cosæ³¢å½¢ä»0åˆ°40çš„å˜åŒ–ï¼Œè¿™å°†ä¼šä½¿cosæ³¢å½¢é‡å¤å¤§çº¦6.3æ¬¡ã€‚

```glsl
-vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx+vec3(0,2,4));
+vec3 col = 0.5 + 0.5*cos(iTime+uv.xyx*40.0+vec3(0,2,4));
```

å¦‚ä¸‹æˆ‘æ•°äº†ä¸‹å¤§çº¦æ˜¯é‡å¤äº†6.3æ¬¡ï¼Œé€šè¿‡ `+vec3(0,2,4)`åç§»äº†4å› æ­¤æˆ‘ä»¬èƒ½çœ‹åˆ°çº¢è“ç›¸é—´ï¼Œå¦åˆ™æˆ‘ä»¬å°†çœ‹åˆ°çº¢è“é¢œè‰²æ··åˆä¸ºç´«è‰²ã€‚

<iframe src="/editor?url=/manual/examples/shadertoy-basic-x40.html"></iframe>

äº†è§£åˆ°è¾“å…¥å¦‚æ­¤ç®€å•ï¼Œå½“çœ‹åˆ°å¦‚
[a city canal](https://www.shadertoy.com/view/MdXGW2),
[a forest](https://www.shadertoy.com/view/4ttSWf),
[a snail](https://www.shadertoy.com/view/ld3Gz2),
[a
mushroom](https://www.shadertoy.com/view/4tBXR1)è¿™äº›ç»“æœï¼Œè®©äººæ›´è§‰å¾—å……æ»¡æŒ‘æˆ˜ã€‚å¹¸è¿çš„æ˜¯è¿™ä¹Ÿæ¸…æ™°çš„è¯´æ˜ä¸ºä½•ç›¸å¯¹äºä¼ ç»Ÿçš„ä¸‰è§’å½¢æ„æˆçš„åœºæ™¯ï¼Œè¿™é€šå¸¸è¿™ä¸æ˜¯æ­£ç¡®çš„æ–¹å¼ã€‚å› ä¸ºæ¯ä¸ªåƒç´ é¢œè‰²éƒ½éœ€è¦ç»è¿‡è®¸å¤šæ•°å­¦è®¡ç®—ï¼Œé€šå¸¸ä¼šå¯¼è‡´è¿è¡Œç¼“æ…¢ã€‚

æœ‰äº›shadertoyçš„shadersä½¿ç”¨çº¹ç†è´´å›¾ä½œä¸ºè¾“å…¥ï¼Œæ¯”å¦‚[è¿™ä¸ª](https://www.shadertoy.com/view/MsXSzM)ã€‚

```glsl
// By Daedelus: https://www.shadertoy.com/user/Daedelus
// license: Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.
#define TIMESCALE 0.25
#define TILES 8
#define COLOR 0.7, 1.6, 2.8

void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
vec2 uv = fragCoord.xy / iResolution.xy;
uv.x *= iResolution.x / iResolution.y;

vec4 noise = texture2D(iChannel0, floor(uv * float(TILES)) / float(TILES));
float p = 1.0 - mod(noise.r + noise.g + noise.b + iTime * float(TIMESCALE), 1.0);
p = min(max(p * 3.0 - 1.8, 0.1), 2.0);

vec2 r = mod(uv * float(TILES), 1.0);
r = vec2(pow(r.x - 0.5, 2.0), pow(r.y - 0.5, 2.0));
p *= 1.0 - pow(min(1.0, 12.0 * dot(r, r)), 2.0);

fragColor = vec4(COLOR, 1.0) * p;
}
```

ç»™shaderä¼ é€’çº¹ç†ä¸[ç»™å¸¸è§„æè´¨ä¼ é€’çº¹ç†](textures.html)ä¸€æ ·ï¼Œåªä¸è¿‡éœ€è¦é€šè¿‡uniformsæ¥è®¾ç½®çº¹ç†ã€‚

é¦–å…ˆéœ€è¦ç»™shaderæ·»åŠ ä¸€ä¸ªçº¹ç†çš„uniformã€‚åœ¨GLSLä¸­å¯¹åº”ä¸º
`sampler2D` ã€‚

```js
const fragmentShader = `
#include <common>

uniform vec3 iResolution;
uniform float iTime;
+uniform sampler2D iChannel0;

...
```

ç„¶åæˆ‘ä»¬å¯ä»¥åƒ[è¿™é‡Œ](textures.html)ä¸€æ ·è½½å…¥çº¹ç†ï¼Œå¹¶ä¸”è®¾ç½®uniformçš„å€¼ã€‚

```js
+const loader = new THREE.TextureLoader();
+const texture = loader.load('resources/images/bayer.png');
+texture.minFilter = THREE.NearestFilter;
+texture.magFilter = THREE.NearestFilter;
+texture.wrapS = THREE.RepeatWrapping;
+texture.wrapT = THREE.RepeatWrapping;
const uniforms = {
iTime: { value: 0 },
iResolution:  { value: new THREE.Vector3() },
+  iChannel0: { value: texture },
};
```

<iframe src="/editor?url=/manual/examples/shadertoy-bleepy-blocks.html"></iframe>

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´ç”¨[Shadertoy.com](https://shadertoy.com)ä¸Šçš„æ–¹å¼ä½¿ç”¨ Shadertoy
shaders,å³åœ¨canvasä¸Šç»˜åˆ¶shaderã€‚ä½†æˆ‘ä»¬æ— éœ€å—é™äºæ­¤ã€‚è¯·ç•™æ„ï¼Œé€šå¸¸äººä»¬åœ¨Shadertoyä¸Šå†™çš„å‡½æ•°ä»…è¾“å…¥ä¸€ä¸ª`fragCoord` å’Œä¸€ä¸ª`iResolution`å‚æ•°ã€‚`fragCoord` ä¸ä¸€å®šæ¥è‡ªåƒç´ åæ ‡ï¼Œåƒçº¹ç†åæ ‡ä¹Ÿå¯ä»¥ï¼Œç„¶åå°±å¯ä»¥åƒå¸¸è§„çš„çº¹ç†ä¸€æ ·ä½¿ç”¨ã€‚é€šå¸¸æŠŠè¿™ç§é€šè¿‡å‡½æ•°ç”Ÿæˆçº¹ç†çš„æŠ€æœ¯å«åš[_procedural texture_](https://www.google.com/search?q=procedural+texture)ã€‚

è®©æˆ‘ä»¬æ”¹ä¸€æ”¹ä¸Šé¢çš„shaderï¼Œæœ€ç®€å•çš„è«è¿‡äºä½¿ç”¨three.jsæä¾›çš„çº¹ç†åæ ‡ï¼Œä¹˜ä¸Š`iResolution`å†ä¼ åˆ°`fragCoords`ã€‚

æˆ‘ä»¬éœ€è¦åŠ ä¸€ä¸ª*varying*å˜é‡ã€‚varingå˜é‡é€šè¿‡å¯¹é¡¶ç‚¹è¿›è¡Œæ’å€¼ï¼ˆä¹Ÿå«variedï¼‰å®ç°ä»vertex shaderä¼ å€¼åˆ°fragment shaderã€‚åœ¨fragment
shaderä¸­ä½¿ç”¨ä¹‹å‰éœ€è¦å…ˆå£°æ˜è¯¥å˜é‡ã€‚è¿™ä¸ªå˜é‡åä¸­çš„ `uv`ä»£è¡¨çº¹ç†åæ ‡ï¼Œå‰é¢çš„`v`ä»£è¡¨*varying*ã€‚

```glsl
...

+varying vec2 vUv;

void main() {
-  mainImage(gl_FragColor, gl_FragCoord.xy);
+  mainImage(gl_FragColor, vUv * iResolution.xy);
}
```

ç„¶åæˆ‘ä»¬éœ€è¦å®ç°vertex shaderï¼Œä¸‹é¢æ˜¯æœ€ç®€åŒ–çš„three.jsçš„vertex shaderã€‚three.jsä¸­å®šä¹‰äº†`uv`ï¼Œ`projectionMatrix`ï¼Œ`modelViewMatrix`ï¼Œå’Œ `position`è¿™å‡ ä¸ªå‚æ•°ï¼Œä¸”å¯ä»¥ä¼ å€¼ç»™shaderã€‚

```js
const vertexShader = `
varying vec2 vUv;
void main() {
vUv = uv;
gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`;
```

æŠŠvertexshaderä¼ ç»™[`ShaderMaterial`](/api/en/materials/ShaderMaterial)ã€‚

```js
const material = new THREE.ShaderMaterial({
  vertexShader,
  fragmentShader,
  uniforms,
});
```

å› ä¸º`iResolution`ä¿æŒä¸å˜ï¼Œå› æ­¤å¯ä»¥åœ¨åˆå§‹åŒ–æ—¶è®¾å®šå®ƒçš„å€¼ã€‚

```js
const uniforms = {
iTime: { value: 0 },
-  iResolution:  { value: new THREE.Vector3() },
+  iResolution:  { value: new THREE.Vector3(1, 1, 1) },
iChannel0: { value: texture },
};
```

åœ¨æ¸²æŸ“æ—¶æ— éœ€è®¾ç½®å®ƒçš„å€¼ã€‚

```js
-const canvas = renderer.domElement;
-uniforms.iResolution.value.set(canvas.width, canvas.height, 1);
uniforms.iTime.value = time;
```

å¦å¤–æˆ‘ä»[å…³äºå“åº”èƒ½åŠ›çš„æ–‡ç« ](responsive.html)å¤åˆ¶äº†ä¸€æ®µ3ä¸ªæ—‹è½¬cubeä»£ç ã€‚æ•ˆæœå¦‚ä¸‹ï¼š

<iframe src="/editor?url=/manual/examples/shadertoy-as-texture.html"></iframe>

å¸Œæœ›è¿™ç¯‡æ–‡å­—èƒ½è¯´æ¸…åœ¨three.jsä½¿ç”¨shadertoy shaderçš„å…¥é—¨æ–¹æ³•ã€‚å†æ¬¡é‡ç”³ï¼Œå¤§éƒ¨åˆ†çš„shadertoy
shadersä¸å…¶è¯´æ˜¯æ€§èƒ½æ–¹é¢çš„æœ€ä½³å®è·µï¼Œä¸å¦‚ç§°å®ƒä»¬æ˜¯æœ‰è¶£çš„æŒ‘æˆ˜ï¼ˆé€šè¿‡å‡½æ•°å®ç°æ‰€æœ‰ç»˜åˆ¶ï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä»–ä»¬è¿˜æ˜¯æœ‰ç€ä»¤äººå°è±¡æ·±åˆ»çš„æƒŠè‰³å’Œç¾ï¼Œäº†è§£shaderå·¥ä½œåŸç†å¯ä»¥å­¦åˆ°å¾ˆå¤šä¸œè¥¿ã€‚
