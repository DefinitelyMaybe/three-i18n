---
title: تحولات المصفوفة (Matrix transformations)
sidebar:
  order: 4
---

يستخدم _Three.js_ المصفوفات لتشفير عمليات التحويل ثلاثية الأبعاد --- الترجمات (الموضع) والتدوير والقياس. يحتوي كل مثيل [Object3D](api/core/Object3D) على [matrix](api/core/Object3D#matrix) يخزن موضع هذا الكائن وتدويره ومقياسه. تصف هذه الصفحة كيفية تحديث تحول الكائن.

## خصائص الراحة و _matrixAutoUpdate_

هناك طريقتان لتحديث تحول الكائن(object):

<ol>
<li>
عدّل خصائص *position* و *quaternion* و *scale* الخاصة بالكائن ، واسمح لـ three.js بإعادة حساب مصفوفة الكائن من هذه الخصائص:

```javascript
object.position.copy(start_position);
object.quaternion.copy(quaternion);
```

بشكل افتراضي ، يتم تعيين الخاصية _matrixAutoUpdate_ على "true" ، وستتم إعادة حساب المصفوفة تلقائيًا. إذا كان الكائن ثابتًا ، أو كنت ترغب في التحكم يدويًا عند حدوث إعادة الحساب ، فيمكن الحصول على أداء أفضل من خلال تعيين الخاصية false:

```javascript
object.matrixAutoUpdate = false;
```

وبعد تغيير أي خصائص ، قم بتحديث المصفوفة يدويًا:

```javascript
object.updateMatrix();
```

</li>
<li>
قم بتعديل مصفوفة الكائن مباشرة. تحتوي فئة [Matrix4](api/math/Matrix4) على طرق مختلفة لتعديل المصفوفة:

```javascript
object.matrix.setRotationFromQuaternion(quaternion);
object.matrix.setPosition(start_position);
object.matrixAutoUpdate = false;
```

لاحظ أنه _يجب_ ضبط _matrixAutoUpdate_ على _false_ في هذه الحالة ، ويجب عليك التأكد من _عدم_ استدعاء _updateMatrix_. سيؤدي استدعاء _updateMatrix_ إلى إعاقة التغييرات اليدوية التي تم إجراؤها على المصفوفة ، وإعادة حساب المصفوفة من _position_ ، _scale_ ، وما إلى ذلك.

</li>
</ol>

## مصفوفات وعالم الكائن

يخزن [matrix](api/core/Object3D#matrix) كائن تحويل الكائن _بالنسبة_ إلى [parent](api/core/Object3D#parent) الكائن ؛ للحصول على تحول الكائن في إحداثيات _العالم_ ، يجب عليك الوصول إلى [Object3D](api/core/Object3D#matrixWorld) الكائن.

عندما تتغير حالة الكائن الأصل أو الكائن الفرعي ، يمكنك طلب تحديث [matrixWorld](api/core/Object3D#matrixWorld) الكائن الفرعي عن طريق استدعاء [updateMatrixWorld](api/core/Object3D#updateMatrixWorld)().

## الدوران و Quaternion

يوفر Three.js طريقتين لتمثيل التدوير ثلاثي الأبعاد: [Euler angles](api/math/Euler) و [Quaternions](api/math/Quaternion) ، بالإضافة إلى طرق التحويل بين الاثنين. تخضع زوايا أويلر لمشكلة تسمى "gimballock" ، حيث يمكن أن تفقد بعض التكوينات درجة من الحرية (تمنع تدوير الكائن حول محور واحد). لهذا السبب ، يتم تخزين استدارة الكائن _دائمًا_ في [quaternion](api/core/Object3D#quaternion).

تضمنت الإصدارات السابقة من المكتبة خاصية _useQuaternion_ والتي ، عند ضبطها على false ، ستؤدي إلى حساب [matrix](api/core/Object3D#matrix) للكائن من زاوية أويلر. تم إيقاف هذه الممارسة - بدلاً من ذلك ، يجب عليك استخدام طريقة [setRotationFromEuler](api/core/Object3D#setRotationFromEuler) ، والتي ستعمل على تحديث الرباعية.
